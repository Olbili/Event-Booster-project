{"mappings":"YAEA,IAAMA,EAAOC,SAASC,KAChBC,EAUN,SAAqBC,GACnB,IAAMC,EAAUD,EAAUE,cAAc,kBAClCC,EAASH,EAAUE,cAAc,iBACjCE,EAAUJ,EAAUE,cAAc,kBAClCG,EAAML,EAAUE,cAAc,cAE9BI,EAASC,EAAY,GAAI,IACzBC,EAASD,EAAY,GAAI,IACzBE,EAASF,EAAY,GAAI,IACzBG,EAASH,EAAY,GAAI,IAEzBI,EAAY,IAAIC,YAAY,CAChCC,kBAyFF,WACEb,EAAUc,oBAAoB,QAASC,GACvCnB,EAAKoB,YAAYhB,E,EA1FjBiB,QAmFF,WACErB,EAAKsB,YAAYlB,GACjBA,EAAUmB,iBAAiB,QAASJ,E,EApFpCK,QAAQ,IAEPC,GACCf,EACA,GACA,CACEgB,EAAG,GACHC,EAAG,GACHC,KAAMC,OAAOC,QAEf,GAEDL,GACCX,EACA,GACA,CACEY,EAAG,EACHC,EAAG,GACHC,KAAMG,OAAOD,QAEf,SAEDL,GAAGf,EAAQ,GAAK,CACfgB,EAAG,EACHC,EAAG,EACHC,KAAMI,OAAOF,SAEdL,GACCb,EACA,GACA,CACEc,EAAG,IACHC,EAAG,EACHC,KAAMG,OAAOD,QAEf,SAEDL,GAAGZ,EAAQ,GAAK,CACfa,EAAG,IACHC,EAAG,IACHC,KAAMG,OAAOD,SAEdL,GACCX,EACA,GACA,CACEY,EAAG,EACHC,EAAG,IACHC,KAAMG,OAAOD,QAEf,SAEDL,GACCrB,EACA,EACA,CACE6B,UAAW,GAEb,GAEDR,GAAGpB,EAAS,EAAG,CACd4B,UAAW,IAGTC,EAAQ,CACZnB,UAAWA,EACXX,UAAWA,EACXC,QAASA,EACTE,OAAQA,EACR4B,QAAQ,EACRC,KAsBF,WACEF,EAAMC,QAAS,EACfpB,EAAUsB,OAAOC,UAAU,E,EAvB3BC,MAAOA,GAKT,SAASpB,IACHe,EAAMC,QACRI,G,CAmBJ,SAASA,IACPL,EAAMC,QAAS,EACfpB,EAAUyB,UAAUF,UAAU,E,CAGhC,SAAS3B,EAAYe,EAAGC,GACtB,IAAMc,EAAQjC,EAAQkC,OAAOC,WAAWlC,EAAImC,kBAG5C,OAFAH,EAAMf,EAAIA,GAAK,EACfe,EAAMd,EAAIA,GAAK,EACRc,C,CAGT,OAnCAzC,EAAKoB,YAAYhB,GAmCV8B,C,CArIKW,CAAY5C,SAASK,cAAc,aAM1C,SAASwC,IACd3C,EAAMoC,O,CCNR,IAAMQ,EAAO,CACXC,UAAW/C,SAASK,cAAc,kBAClC2C,OAAQhD,SAASK,cAAc,iBAC/B4C,OAAQjD,SAASK,cAAc,iBAC/B6C,UAAWlD,SAASK,cAAc,iBAClC8C,cAAenD,SAASoD,iBAAiB,qBACzCC,cAAerD,SAASK,cAAc,sBACtCiD,MAAOtD,SAASK,cAAc,gBAC9BkD,YAAavD,SAASK,cAAc,WAYtCyC,EAAKO,cAAc/B,iBAAiB,SAC7B,WACLwB,EAAKQ,MAAME,UAAUC,IAAI,aACzBZ,G,IAGFC,EAAKQ,MAAMhC,iBAAiB,SAC5B,SAAwBoC,GACtB,GAAIA,EAAGC,SAAWb,EAAKQ,MAIrB,OAHAR,EAAKQ,MAAME,UAAUC,IAAI,aACzBZ,G,IAMJe,OAAOtC,iBAAiB,WACxB,SAAuBoC,GACL,WAAZA,EAAGG,OACLf,EAAKQ,MAAME,UAAUC,IAAI,aACzBZ,I","sources":["src/js/animation_modal.js","src/js/modal.js"],"sourcesContent":["import gsap from 'gsap';\n\nconst body = document.body;\nconst modal = createModal(document.querySelector('#modal-1'));\n\nexport function startModalAnimation() {\n  modal.open();\n}\n\nexport function closeModalAnimation() {\n  modal.close();\n}\n\nfunction createModal(container) {\n  const content = container.querySelector('.modal-content');\n  const dialog = container.querySelector('.modal-dialog');\n  const polygon = container.querySelector('.modal-polygon');\n  const svg = container.querySelector('.modal-svg');\n\n  const point1 = createPoint(45, 45);\n  const point2 = createPoint(55, 45);\n  const point3 = createPoint(55, 55);\n  const point4 = createPoint(45, 55);\n\n  const animation = new TimelineMax({\n    onReverseComplete: onReverseComplete,\n    onStart: onStart,\n    paused: true,\n  })\n    .to(\n      point1,\n      0.3,\n      {\n        x: 15,\n        y: 30,\n        ease: Power4.easeIn,\n      },\n      0\n    )\n    .to(\n      point4,\n      0.3,\n      {\n        x: 5,\n        y: 80,\n        ease: Power2.easeIn,\n      },\n      '-=0.1'\n    )\n    .to(point1, 0.3, {\n      x: 0,\n      y: 0,\n      ease: Power3.easeIn,\n    })\n    .to(\n      point2,\n      0.3,\n      {\n        x: 100,\n        y: 0,\n        ease: Power2.easeIn,\n      },\n      '-=0.2'\n    )\n    .to(point3, 0.3, {\n      x: 100,\n      y: 100,\n      ease: Power2.easeIn,\n    })\n    .to(\n      point4,\n      0.3,\n      {\n        x: 0,\n        y: 100,\n        ease: Power2.easeIn,\n      },\n      '-=0.1'\n    )\n    .to(\n      container,\n      1,\n      {\n        autoAlpha: 1,\n      },\n      0\n    )\n    .to(content, 1, {\n      autoAlpha: 1,\n    });\n\n  const modal = {\n    animation: animation,\n    container: container,\n    content: content,\n    dialog: dialog,\n    isOpen: false,\n    open: open,\n    close: close,\n  };\n\n  body.removeChild(container);\n\n  function onClick() {\n    if (modal.isOpen) {\n      close();\n    }\n  }\n\n  function onStart() {\n    body.appendChild(container);\n    container.addEventListener('click', onClick);\n  }\n\n  function onReverseComplete() {\n    container.removeEventListener('click', onClick);\n    body.removeChild(container);\n  }\n\n  function open() {\n    modal.isOpen = true;\n    animation.play().timeScale(2);\n  }\n\n  function close() {\n    modal.isOpen = false;\n    animation.reverse().timeScale(3);\n  }\n\n  function createPoint(x, y) {\n    const point = polygon.points.appendItem(svg.createSVGPoint());\n    point.x = x || 0;\n    point.y = y || 0;\n    return point;\n  }\n\n  return modal;\n}\n","// import { F } from './f';\nimport { startModalAnimation } from './animation_modal';\nimport { closeModalAnimation } from './animation_modal';\n\nconst refs = {\n  pricesBox: document.querySelector('.modal__prices'),\n  imageS: document.querySelector('.modal__img-s'),\n  imageL: document.querySelector('.modal__img-l'),\n  floatText: document.querySelector('.modal__float'),\n  openModalBtns: document.querySelectorAll('[data-modal-open]'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  modal: document.querySelector('[data-modal]'),\n  modalWindow: document.querySelector('.modal'),\n};\n\nconst ticketIcon = `<svg width=\"29\" height=\"19\" viewBox=\"0 0 44 32\"\n            xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4.91 1.27h-4.91v29.46h4.91v-29.46z\"></path>\n            <path d=\"M17.26 1.27h-4.91v29.46h4.91v-29.46z\"></path>\n            <path d=\"M24.699 1.27h-4.91v29.46h4.91v-29.46z\"></path>\n            <path d=\"M44.19 1.27h-7.291v29.46h7.291v-29.46z\"></path>\n            <path d=\"M9.82 1.27h-2.381v29.46h2.381v-29.46z\"></path>\n            <path d=\"M29.46 1.27h-2.381v29.46h2.381v-29.46z\"></path>\n            <path d=\"M34.37 1.27h-2.381v29.46h2.381v-29.46z\"></path></svg>`;\n\nrefs.closeModalBtn.addEventListener('click', closeModalBtn);\nexport function closeModalBtn() {\n  refs.modal.classList.add('is-hidden');\n  closeModalAnimation();\n}\n\nrefs.modal.addEventListener('click', closeModalBack);\nfunction closeModalBack(ev) {\n  if (ev.target === refs.modal) {\n    refs.modal.classList.add('is-hidden');\n    closeModalAnimation();\n  } else {\n    return;\n  }\n}\n\nwindow.addEventListener('keydown', closeModalKey);\nfunction closeModalKey(ev) {\n  if (ev.code === 'Escape') {\n    refs.modal.classList.add('is-hidden');\n    closeModalAnimation();\n  }\n}\n\nexport function onCardModalOpen(ev) {\n  startModalAnimation();\n  setTimeout(() => refs.modal.classList.remove('is-hidden'), 400);\n\n  const fetchInfo = new FetchService();\n  fetchInfo.config.params.id = ev.currentTarget.dataset.id;\n\n  addInfo();\n\n  function addInfo() {\n    refs.floatText.innerHTML = '';\n    fetchInfo.baseFetch().then(response => {\n      const wholeInfo = response._embedded.events[0];\n\n      const imagesSortByWidth = wholeInfo.images.sort(\n        (a, b) => b.width - a.width\n      );\n\n      let infoPlaceHolder = '';\n      if (wholeInfo.info === undefined) {\n        infoPlaceHolder = `Sorry, there is no info about this event.`;\n      } else {\n        infoPlaceHolder = wholeInfo.info;\n      }\n\n      let datePlaceHolder = '';\n      if (wholeInfo.dates) {\n        if (wholeInfo.dates.start.localTime === undefined) {\n          datePlaceHolder = ` `;\n        } else if (\n          wholeInfo.dates.start.localTime !== undefined &&\n          wholeInfo.dates.timezone === undefined\n        ) {\n          datePlaceHolder = `${wholeInfo.dates.start.localTime.slice(0, 5)}`;\n        } else {\n          datePlaceHolder = `${wholeInfo.dates.start.localTime.slice(0, 5)} (${\n            wholeInfo.dates.timezone\n          })`;\n        }\n      }\n\n      let pricesList = [];\n      let whoValue;\n      if (wholeInfo._embedded.attractions === undefined) {\n        //   refs.imageS.setAttribute('src', `${imagesSortByWidth[0].url}`);\n        //   refs.imageL.setAttribute('src', `${imagesSortByWidth[0].url}`);\n        //   const emptyModalMarkup = `<div class=\"modal__text-three\"><div class=\"modal__text-two\">\n        // <div class=\"modal__text-block\">\n        //   <h3 class=\"modal__title\">Info</h3>\n        //   <p class=\"modal__text modal__info\">${infoPlaceHolder}</p>\n        // </div>`;\n        //   refs.floatText.insertAdjacentHTML('afterbegin', emptyModalMarkup);\n        //   document.querySelector('.modal__btn').classList.add('is-hidden');\n        //   return;\n        whoValue = wholeInfo.name;\n      } else {\n        whoValue = wholeInfo._embedded.attractions[0].name;\n      }\n      if (wholeInfo.priceRanges !== undefined) {\n        for (let i = 0; i < wholeInfo.priceRanges.length; i++) {\n          let pricesItem = `<li class=\"modal__thumb-item\">\n            <p class=\"modal__text text-flex\">\n              <span class=\"modal__prices-icon\">${ticketIcon}</span> \n              ${wholeInfo.priceRanges[i].type} ${wholeInfo.priceRanges[i].min}-${wholeInfo.priceRanges[i].max} ${wholeInfo.priceRanges[i].currency}\n            </p>\n            <a class=\"modal__btn modal__link-buy\" href=\"${wholeInfo.url}\" target=\"_blank\" rel=\"noreferrer noopener\">Buy ticket</a>\n            </li>`;\n          pricesList.push(pricesItem);\n        }\n      } else {\n        pricesList.push(`<li class=\"modal__thumb-item\">\n            <p class=\"modal__text\">\n        Sorry, there is no info about prices.\n        </p>\n        </li>\n        `);\n      }\n      document.querySelector('.modal__btn').classList.remove('is-hidden');\n      refs.imageS.setAttribute('src', `${imagesSortByWidth[0].url}`);\n      refs.imageL.setAttribute('src', `${imagesSortByWidth[0].url}`);\n\n      const markup = `<div class=\"modal__text-three\"><div class=\"modal__text-two\">\n      <div class=\"modal__text-block\">\n        <h3 class=\"modal__title\">Info</h3>\n        <p class=\"modal__text modal__info\">${infoPlaceHolder}</p>\n      </div>\n      <div class=\"modal__text-block\">\n        <h3 class=\"modal__title\">When</h3>\n        <p class=\"modal__text\">${\n          wholeInfo.dates.start.localDate\n        }</br>${datePlaceHolder}</p>\n      </div>\n      </div>\n      <div class=\"modal__text-block\">\n        <h3 class=\"modal__title\">Where</h3>\n        <p class=\"modal__text\">${wholeInfo._embedded.venues[0].city.name}, ${\n        wholeInfo._embedded.venues[0].country.name\n      }</br>${wholeInfo._embedded.venues[0].name}</p>\n      </div>\n      </div>\n      <div class=\"modal__text-block\">\n        <h3 class=\"modal__title\">Who</h3>\n        <p class=\"modal__text author-name-js\">${whoValue}</p>\n      </div>\n      <div class=\"modal__prices-block\">\n        <h3 class=\"modal__title\">Prices</h3>\n        <ul class=\"modal__prices\">\n        ${pricesList.join('')}\n        </ul>\n        </div>`;\n\n      refs.floatText.insertAdjacentHTML('afterbegin', markup);\n      let objEvent;\n      if (wholeInfo._embedded.attractions === undefined) {\n        objEvent = {\n          imgEvent: wholeInfo.images[4].url,\n          name: wholeInfo.name,\n          country: wholeInfo._embedded.venues[0].country.name,\n          city: wholeInfo._embedded.venues[0].city.name,\n          urlBuyTicket: wholeInfo.url,\n          dataEvents: wholeInfo.dates.start.localDate,\n        };\n      } else {\n        objEvent = {\n          imgEvent: wholeInfo.images[4].url,\n          name: wholeInfo._embedded.attractions[0].name,\n          country: wholeInfo._embedded.venues[0].country.name,\n          city: wholeInfo._embedded.venues[0].city.name,\n          urlBuyTicket: wholeInfo.url,\n          dataEvents: wholeInfo.dates.start.localDate,\n        };\n      }\n\n    });\n  }\n}\n"],"names":["$ac6841b62100e896$var$body","document","body","$ac6841b62100e896$var$modal","container","content","querySelector","dialog","polygon","svg","point1","createPoint","point2","point3","point4","animation","TimelineMax","onReverseComplete","removeEventListener","onClick","removeChild","onStart","appendChild","addEventListener","paused","to","x","y","ease","Power4","easeIn","Power2","Power3","autoAlpha","modal1","isOpen","open","play","timeScale","close","reverse","point","points","appendItem","createSVGPoint","$ac6841b62100e896$var$createModal","$ac6841b62100e896$export$24d174af9f0206d0","$40873ecf3c18e122$var$refs","pricesBox","imageS","imageL","floatText","openModalBtns","querySelectorAll","closeModalBtn","modal","modalWindow","classList","add","ev","target","window","code"],"version":3,"file":"index.4dc2adea.js.map"}